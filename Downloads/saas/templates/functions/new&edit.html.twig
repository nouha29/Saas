{{ include('partials/main.html.twig') }}

<head>
    <br>
    <br>
    {{ include('partials/title-meta.html.twig', {title: function.id ? 'Modifier la fonction' : 'Créer une fonction'}) }}
    <link href="{{ asset('assets/libs/sweetalert2/sweetalert2.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ asset('assets/css/icons.min.css') }}" rel="stylesheet">
    <link href="{{ asset('assets/css/app.min.css') }}" rel="stylesheet">
    <style>
        .form-control-sm {
            height: calc(1.5em + 0.5rem + 2px);
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            line-height: 1.5;
            border-radius: 0.2rem;
        }
    </style>
</head>

<body>
    <div id="layout-wrapper">
        {{ include('partials/menu.html.twig') }}
        
        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid">
                    {{ include('partials/page-title.html.twig', {
                        pagetitle: 'Fonctions',
                        title: function.id ? 'Modifier la fonction' : 'Créer une fonction'
                    }) }}

                    <div class="row justify-content-center">
                        <div class="col-xxl-9">
                            <div class="card">
                                {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
                                    <div class="card-body border-bottom border-bottom-dashed p-4">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <div class="profile-user mx-auto mb-3">
                                                    <input id="profile-img-file-input" type="file" class="profile-img-file-input" />
                                                    <label for="profile-img-file-input" class="d-block" tabindex="0">
                                                        <span class="overflow-hidden border border-dashed d-flex align-items-center justify-content-center rounded" style="height: 60px; width: 256px;">
                                                            <img src="{{ asset('assets/images/logo-dark.png') }}" class="card-logo card-logo-dark user-profile-image img-fluid" alt="logo dark">
                                                            <img src="{{ asset('assets/images/logo-light.png') }}" class="card-logo card-logo-light user-profile-image img-fluid" alt="logo light">
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 ms-auto">
                                                <div class="mb-3">
                                                    <label class="form-label">ID</label>
                                                    {% if function.id %}
                                                        <div class="form-control bg-light border-0">{{ function.id }}</div>
                                                    {% else %}
                                                        <div class="form-control bg-light border-0">Nouvelle fonction</div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-body p-4">
                                        <div class="row g-3">
                                            <div class="col-lg-12">
                                                {{ form_row(form.intitule, {
                                                    'attr': {
                                                        'class': 'form-control',
                                                        'placeholder': 'Entrez l\'intitulé de la fonction'
                                                    },
                                                    'label': 'Intitulé de la fonction'
                                                }) }}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-body p-4">
                                        <div class="hstack gap-2 justify-content-end">
                                            <button type="submit" class="btn btn-success">
                                                <i class="ri-save-line align-bottom me-1"></i> {{ function.id ? 'Mettre à jour' : 'Enregistrer' }}
                                            </button>
                                            <a href="{{ path('app_functions_index') }}" class="btn btn-light">
                                                Annuler
                                            </a>
                                        </div>
                                    </div>
                                {{ form_end(form) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{ include('partials/footer.html.twig') }}
        </div>
    </div>

    {{ include('partials/vendor-scripts.html.twig') }}
    <script src="{{ asset('assets/libs/sweetalert2/sweetalert2.min.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            $('[data-toggle="tooltip"]').tooltip();
            {% for message in app.flashes('success') %}
                Swal.fire({
                    icon: 'success',
                    title: 'Succès',
                    text: '{{ message }}',
                    showConfirmButton: false,
                    timer: 3000
                });
            {% endfor %}
            
            {% for message in app.flashes('error') %}
                Swal.fire({
                    icon: 'error',
                    title: 'Erreur',
                    text: '{{ message }}',
                    showConfirmButton: true
                });
            {% endfor %}
        });
    </script>
</body>
</html>